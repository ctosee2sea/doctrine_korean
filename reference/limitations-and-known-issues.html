<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>28. Limitations and Known Issues &mdash; Doctrine 2 ORM 2 documentation</title>
    <link rel="stylesheet" href="../src/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../src/default.css" type="text/css" />
    <link rel="stylesheet" href="../src/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../src/layout.css" type="text/css" />
    <link rel="stylesheet" href="../src/configurationblock.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script type="text/javascript" src="../src/jquery.js"></script>
    <script type="text/javascript" src="../src/configurationblock.js"></script>
    <script type="text/javascript" src="../src/underscore.js"></script>
    <script type="text/javascript" src="../src/configurationblock.js"></script>
    <script type="text/javascript" src="../src/doctools.js"></script>
    <script type="text/javascript" src="../src/configurationblock.js"></script>
    <script src="../src/bootstrap.min.js"></script>

    <script type="text/javascript">
    <!--
        $(document).ready(function() {
            $("#versions").change(function() {
                var docsUrl = $(this).val();
                window.location.href = docsUrl;
            });
        });
    -->
    </script>
    <link rel="shortcut icon" href="../src/doctrine.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Doctrine 2 ORM 2 documentation" href="../index.html" />
    <link rel="next" title="30. Filters" href="filters.html" />
    <link rel="prev" title="27. Best Practices" href="best-practices.html" /> 
  
<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/limitations-and-known-issues.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../src/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'reference/limitations-and-known-issues' 		
READTHEDOCS_DATA['source_suffix'] = '.rst'
</script>

<script type="text/javascript" src="../src/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> --></head>
  <body>
    <div id="wrapper">
      <div id="header">
        <h1 id="h1title"></h1>
        <div id="logo">
          <a href="http://www.doctrine-project.org/">Doctrine - PHP Database Libraries</a>
        </div>
      </div>
      <div id="nav" class="cls">
        <div class="tl cls">
          <ul>
            <li><a target="_top" href="http://www.doctrine-project.org/">Home</a></li>
            <li><a target="_top" href="http://www.doctrine-project.org/about.html">About</a></li>
            <li><a target="_top" href="http://www.doctrine-project.org/projects.html">Projects</a></li>
            <li><a target="_top" href="http://www.doctrine-project.org/contribute.html">Contribute</a></li>
            <li><a target="_top" href="http://www.doctrine-project.org/community.html">Community</a></li>
            <li><a target="_top" href="http://www.doctrine-project.org/archive.html">Blog</a></li>
            <li><a target="_top" href="http://www.doctrine-project.org/jira">Development</a></li>
          </ul>
        </div>
      </div>
      <div id="content" class="cls">
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="filters.html" title="30. Filters"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="best-practices.html" title="27. Best Practices"
             accesskey="P">previous</a> |</li>
        <li><a href="/">Doctrine Homepage</a> &raquo;</li>
        <li><a href="../index.html">Doctrine 2 ORM 2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

        <div class="document">
            <div class="documentwrapper">
                <div class="bodywrapper">

              <div class="body" >
                
  <div class="section" id="limitations-and-known-issues">
<h1>28. Limitations and Known Issues<a class="headerlink" href="#limitations-and-known-issues" title="Permalink to this headline">¶</a></h1>
<p>We try to make using Doctrine2 a very pleasant experience.
Therefore we think it is very important to be honest about the
current limitations to our users. Much like every other piece of
software Doctrine2 is not perfect and far from feature complete.
This section should give you an overview of current limitations of
Doctrine 2 as well as critical known issues that you should know
about.</p>
<div class="section" id="current-limitations">
<h2>28.1. Current Limitations<a class="headerlink" href="#current-limitations" title="Permalink to this headline">¶</a></h2>
<p>There is a set of limitations that exist currently which might be
solved in the future. Any of this limitations now stated has at
least one ticket in the Tracker and is discussed for future
releases.</p>
<div class="section" id="join-columns-with-non-primary-keys">
<h3>28.1.1. Join-Columns with non-primary keys<a class="headerlink" href="#join-columns-with-non-primary-keys" title="Permalink to this headline">¶</a></h3>
<p>It is not possible to use join columns pointing to non-primary keys. Doctrine will think these are the primary
keys and create lazy-loading proxies with the data, which can lead to unexpected results. Doctrine can for performance
reasons not validate the correctness of this settings at runtime but only through the Validate Schema command.</p>
</div>
<div class="section" id="mapping-arrays-to-a-join-table">
<h3>28.1.2. Mapping Arrays to a Join Table<a class="headerlink" href="#mapping-arrays-to-a-join-table" title="Permalink to this headline">¶</a></h3>
<p>Related to the previous limitation with &#8220;Foreign Keys as
Identifier&#8221; you might be interested in mapping the same table
structure as given above to an array. However this is not yet
possible either. See the following example:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">product</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">product_attributes</span> <span class="p">(</span>
    <span class="n">product_id</span> <span class="nb">INTEGER</span><span class="p">,</span>
    <span class="n">attribute_name</span> <span class="nb">VARCHAR</span><span class="p">,</span>
    <span class="n">attribute_value</span> <span class="nb">VARCHAR</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">product_id</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>This schema should be mapped to a Product Entity as follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="x">class Product</span>
<span class="x">{</span>
<span class="x">    private $id;</span>
<span class="x">    private $name;</span>
<span class="x">    private $attributes = array();</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Where the <code class="docutils literal"><span class="pre">attribute_name</span></code> column contains the key and
<code class="docutils literal"><span class="pre">attribute_value</span></code> contains the value of each array element in
<code class="docutils literal"><span class="pre">$attributes</span></code>.</p>
<p>The feature request for persistence of primitive value arrays
<a class="reference external" href="http://www.doctrine-project.org/jira/browse/DDC-298">is described in the DDC-298 ticket</a>.</p>
</div>
<div class="section" id="cascade-merge-with-bi-directional-associations">
<h3>28.1.3. Cascade Merge with Bi-directional Associations<a class="headerlink" href="#cascade-merge-with-bi-directional-associations" title="Permalink to this headline">¶</a></h3>
<p>There are two bugs now that concern the use of cascade merge in combination with bi-directional associations.
Make sure to study the behavior of cascade merge if you are using it:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.doctrine-project.org/jira/browse/DDC-875">DDC-875</a> Merge can sometimes add the same entity twice into a collection</li>
<li><a class="reference external" href="http://www.doctrine-project.org/jira/browse/DDC-763">DDC-763</a> Cascade merge on associated entities can insert too many rows through &#8220;Persistence by Reachability&#8221;</li>
</ul>
</div>
<div class="section" id="custom-persisters">
<h3>28.1.4. Custom Persisters<a class="headerlink" href="#custom-persisters" title="Permalink to this headline">¶</a></h3>
<p>A Persister in Doctrine is an object that is responsible for the
hydration and write operations of an entity against the database.
Currently there is no way to overwrite the persister implementation
for a given entity, however there are several use-cases that can
benefit from custom persister implementations:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.doctrine-project.org/jira/browse/DDC-668">Add Upsert Support</a></li>
<li><a class="reference external" href="http://www.doctrine-project.org/jira/browse/DDC-445">Evaluate possible ways in which stored-procedures can be used</a></li>
</ul>
</div>
<div class="section" id="persist-keys-of-collections">
<h3>28.1.5. Persist Keys of Collections<a class="headerlink" href="#persist-keys-of-collections" title="Permalink to this headline">¶</a></h3>
<p>PHP Arrays are ordered hash-maps and so should be the
<code class="docutils literal"><span class="pre">Doctrine\Common\Collections\Collection</span></code> interface. We plan to
evaluate a feature that optionally persists and hydrates the keys
of a Collection instance.</p>
<p><a class="reference external" href="http://www.doctrine-project.org/jira/browse/DDC-213">Ticket DDC-213</a></p>
</div>
<div class="section" id="mapping-many-tables-to-one-entity">
<h3>28.1.6. Mapping many tables to one entity<a class="headerlink" href="#mapping-many-tables-to-one-entity" title="Permalink to this headline">¶</a></h3>
<p>It is not possible to map several equally looking tables onto one
entity. For example if you have a production and an archive table
of a certain business concept then you cannot have both tables map
to the same entity.</p>
</div>
<div class="section" id="behaviors">
<h3>28.1.7. Behaviors<a class="headerlink" href="#behaviors" title="Permalink to this headline">¶</a></h3>
<p>Doctrine 2 will <strong>never</strong> include a behavior system like Doctrine 1
in the core library. We don&#8217;t think behaviors add more value than
they cost pain and debugging hell. Please see the many different
blog posts we have written on this topics:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.doctrine-project.org/2010/02/17/doctrine2-behaviours-nutshell.html">Doctrine2 &#8220;Behaviors&#8221; in a Nutshell</a></li>
<li><a class="reference external" href="http://www.doctrine-project.org/2010/02/24/doctrine2-versionable.html">A re-usable Versionable behavior for Doctrine2</a></li>
<li><a class="reference external" href="http://www.doctrine-project.org/2010/07/19/your-own-orm-doctrine2.html">Write your own ORM on top of Doctrine2</a></li>
<li><a class="reference external" href="http://www.doctrine-project.org/2010/11/18/doctrine2-behavioral-extensions.html">Doctrine 2 Behavioral Extensions</a></li>
<li><cite>Doctrator &lt;https://github.com/pablodip/doctrator</cite>&gt;_</li>
</ul>
<p>Doctrine 2 has enough hooks and extension points so that <strong>you</strong> can
add whatever you want on top of it. None of this will ever become
core functionality of Doctrine2 however, you will have to rely on
third party extensions for magical behaviors.</p>
</div>
<div class="section" id="nested-set">
<h3>28.1.8. Nested Set<a class="headerlink" href="#nested-set" title="Permalink to this headline">¶</a></h3>
<p>NestedSet was offered as a behavior in Doctrine 1 and will not be
included in the core of Doctrine 2. However there are already two
extensions out there that offer support for Nested Set with
Doctrine 2:</p>
<ul class="simple">
<li><a class="reference external" href="http://github.com/guilhermeblanco/Doctrine2-Hierarchical-Structural-Behavior">Doctrine2 Hierarchical-Structural Behavior</a></li>
<li><a class="reference external" href="http://github.com/blt04/doctrine2-nestedset">Doctrine2 NestedSet</a></li>
</ul>
</div>
</div>
<div class="section" id="known-issues">
<h2>28.2. Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<p>The Known Issues section describes critical/blocker bugs and other
issues that are either complicated to fix, not fixable due to
backwards compatibility issues or where no simple fix exists (yet).
We don&#8217;t plan to add every bug in the tracker there, just those
issues that can potentially cause nightmares or pain of any sort.</p>
<p>See the Open Bugs on Jira for more details on <a class="reference external" href="http://www.doctrine-project.org/jira/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=10032&amp;resolution=-1&amp;sorter/field=updated&amp;sorter/order=DESC">bugs, improvement and feature
requests</a>.</p>
<div class="section" id="identifier-quoting-and-legacy-databases">
<h3>28.2.1. Identifier Quoting and Legacy Databases<a class="headerlink" href="#identifier-quoting-and-legacy-databases" title="Permalink to this headline">¶</a></h3>
<p>For compatibility reasons between all the supported vendors and
edge case problems Doctrine 2 does <strong>NOT</strong> do automatic identifier
quoting. This can lead to problems when trying to get
legacy-databases to work with Doctrine 2.</p>
<ul class="simple">
<li>You can quote column-names as described in the
<a class="reference internal" href="basic-mapping.html"><span class="doc">Basic-Mapping</span></a> section.</li>
<li>You cannot quote join column names.</li>
<li>You cannot use non [a-zA-Z0-9_]+ characters, they will break
several SQL statements.</li>
</ul>
<p>Having problems with these kind of column names? Many databases
support all CRUD operations on views that semantically map to
certain tables. You can create views for all your problematic
tables and column names to avoid the legacy quoting nightmare.</p>
</div>
<div class="section" id="microsoft-sql-server-and-doctrine-datetime">
<h3>28.2.2. Microsoft SQL Server and Doctrine &#8220;datetime&#8221;<a class="headerlink" href="#microsoft-sql-server-and-doctrine-datetime" title="Permalink to this headline">¶</a></h3>
<p>Doctrine assumes that you use <code class="docutils literal"><span class="pre">DateTime2</span></code> data-types. If your legacy database contains DateTime
datatypes then you have to add your own data-type (see Basic Mapping for an example).</p>
</div>
<div class="section" id="mysql-with-myisam-tables">
<h3>28.2.3. MySQL with MyISAM tables<a class="headerlink" href="#mysql-with-myisam-tables" title="Permalink to this headline">¶</a></h3>
<p>Doctrine cannot provide atomic operations when calling <code class="docutils literal"><span class="pre">EntityManager#flush()</span></code> if one
of the tables involved uses the storage engine MyISAM. You must use InnoDB or
other storage engines that support transactions if you need integrity.</p>
</div>
<div class="section" id="entities-proxies-and-reflection">
<h3>28.2.4. Entities, Proxies and Reflection<a class="headerlink" href="#entities-proxies-and-reflection" title="Permalink to this headline">¶</a></h3>
<p>Using methods for Reflection on entities can be prone to error, when the entity
is actually a proxy the following methods will not work correctly:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">new</span> <span class="pre">ReflectionClass</span></code></li>
<li><code class="docutils literal"><span class="pre">new</span> <span class="pre">ReflectionObject</span></code></li>
<li><code class="docutils literal"><span class="pre">get_class()</span></code></li>
<li><code class="docutils literal"><span class="pre">get_parent_class()</span></code></li>
</ul>
<p>This is why <code class="docutils literal"><span class="pre">Doctrine\Common\Util\ClassUtils</span></code> class exists that has similar
methods, which resolve the proxy problem beforehand.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Doctrine\Common\Util\ClassUtils</span><span class="p">;</span>

<span class="nv">$bookProxy</span> <span class="o">=</span> <span class="nv">$entityManager</span><span class="o">-&gt;</span><span class="na">getReference</span><span class="p">(</span><span class="s1">&#39;Acme\Book&#39;</span><span class="p">);</span>

<span class="nv">$reflection</span> <span class="o">=</span> <span class="nx">ClassUtils</span><span class="o">::</span><span class="na">newReflectionClass</span><span class="p">(</span><span class="nv">$bookProxy</span><span class="p">);</span>
<span class="nv">$class</span> <span class="o">=</span> <span class="nx">ClassUtils</span><span class="o">::</span><span class="na">getClass</span><span class="p">(</span><span class="nv">$bookProxy</span><span class="p">)</span><span class="nx">¸</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
                </div>

            </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
             
                <h3>Project Versions</h3>

                <select name="versions" id="versions">
            
            <option value="http://readthedocs.org/en/latest/">latest</option>
            
            <option value="http://readthedocs.org/en/stable/">stable</option>
            
                </select>
            
            <div id="searchbox" style="">
              <h3>Search</h3>
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="text" name="q" size="18">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:Doctrine ORM">
                </form>
            </div>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">28. Limitations and Known Issues</a><ul>
<li><a class="reference internal" href="#current-limitations">28.1. Current Limitations</a><ul>
<li><a class="reference internal" href="#join-columns-with-non-primary-keys">28.1.1. Join-Columns with non-primary keys</a></li>
<li><a class="reference internal" href="#mapping-arrays-to-a-join-table">28.1.2. Mapping Arrays to a Join Table</a></li>
<li><a class="reference internal" href="#cascade-merge-with-bi-directional-associations">28.1.3. Cascade Merge with Bi-directional Associations</a></li>
<li><a class="reference internal" href="#custom-persisters">28.1.4. Custom Persisters</a></li>
<li><a class="reference internal" href="#persist-keys-of-collections">28.1.5. Persist Keys of Collections</a></li>
<li><a class="reference internal" href="#mapping-many-tables-to-one-entity">28.1.6. Mapping many tables to one entity</a></li>
<li><a class="reference internal" href="#behaviors">28.1.7. Behaviors</a></li>
<li><a class="reference internal" href="#nested-set">28.1.8. Nested Set</a></li>
</ul>
</li>
<li><a class="reference internal" href="#known-issues">28.2. Known Issues</a><ul>
<li><a class="reference internal" href="#identifier-quoting-and-legacy-databases">28.2.1. Identifier Quoting and Legacy Databases</a></li>
<li><a class="reference internal" href="#microsoft-sql-server-and-doctrine-datetime">28.2.2. Microsoft SQL Server and Doctrine &#8220;datetime&#8221;</a></li>
<li><a class="reference internal" href="#mysql-with-myisam-tables">28.2.3. MySQL with MyISAM tables</a></li>
<li><a class="reference internal" href="#entities-proxies-and-reflection">28.2.4. Entities, Proxies and Reflection</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="best-practices.html"
                                  title="previous chapter">27. Best Practices</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="filters.html"
                                  title="next chapter">30. Filters</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/limitations-and-known-issues.rst.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
        </div>
      </div>
          <div class="clearer"></div>
        </div>
          <div class="footer">
              &copy; Copyright 2010-%y, Doctrine Project Team.
              Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.5.3.
            <br/>
            <a target="_BLANK" href="http://www.servergrove.com"><img src="http://www.doctrine-project.org/images/servergrove.jpg" /></a>      <br/><br/>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
              <input type="hidden" name="cmd" value="_s-xclick" />
              <input type="hidden" name="hosted_button_id" value="BAE2E3XANQ77Y" />
              <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
              <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
            </form>
          </div>
      </div>

      <div id="bot-rcnr">
        <div class="tl"><!-- corner --></div>
      </div>
    </div>

  <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
  </script>
  <script type="text/javascript">
  _uacct = "UA-288343-7";
  urchinTracker();
  </script>
  <a class="githublink" href="http://github.com/doctrine"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  </body>
</html>